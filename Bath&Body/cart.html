<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart Page | Bath & Body Works</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@200&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="./style/cart.css">
    <script src="https://kit.fontawesome.com/629044acfa.js" crossorigin="anonymous"></script>
    <link rel="icon" href= "https://assets.giftcash.com/images/cards/bxQNcSqzbX8ws07PjzefYIMHouiM0FQ9Kf60X4OI.png">
  
</head>
<body>
    <div id="headtop">
        <div id="topt1">
            <img src="https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1d0/on/demandware.static/Sites-BathAndBodyWorks-Site/-/default/dw5c22b8c2/images/svg-icons/Logos-main.svg?yocs=q_s_"> 
        </div>
        <div id="nav">

            
            <span style="color: RED;">ALL SALE</span>
            <span>BODY CARE</span>
            <span>CANDLES</span>
            <span>HOME FRAGRANCE</span>
            <SPAN>HAND SOAPS & SANITIZERS</SPAN>
            <SPAN>MEN'S</SPAN>
            <SPAN>GIFTS</SPAN>
            <SPan>BEST SELLER</SPan>

        </div>
    </div>
    <div id="line">
    </div>
    <div class="wrapper">
        <div>
            <P><u>CONTINUE SHOPPING</u></P>
            <H2 id="left">Shopping Bag</H2>
            <div id="line2"></div>
        </div>
        
    <div id="titofshop">
        <h3>ITEMS IN SHOPPING BAG</h3>
    </div>
    <div id="containerhead">
        <h3 ID="headll1" class="ll1">YOUR SHIPPING AND PICKUP CHOICES</h3>
    </div>
    <div id="ship">
        <div id="left">
            <span id="truck" class="fas fa-shipping-fast"></span><span>  11 Items added for Shipping</span>
        </div>
        <div id="right">
            <span id="point" class="fas fa-street-view"></span>
            <div id="rright">
                <p> New! Pick Up in Store </p>
                <p>Get it ASAP! It's easy, fast & free.</p>
            </div>
        </div>
    </div>
    <div id="containerhead">
        <h3 class="ll1">ITEM</h3>
        <h3 class="rr1">PRICE</h3>
        <h3 class="ll1">QUANTITY</h3>
        <h3 class="rr1">TOTAL PRICE</h3>
    </div>
    
    <div id="container">
        
    </div>
    <div id="goto">
        <a href="Men.html"><button id="purchase">UPDATE BAG</button></a>
    </div>
    <div id="checkout">
        <div id="promo">
            <h3>PROMOTION CODE</h3>
            <P>Only one code can be applied per order.</P>
            <input id="codebox" type="text" placeholder="Enter Code"><input id="secretcode" type="submit" value="APPLY">
        </div>
        <id id="overall">
            <div class="over1">
                <p>Merchandise Subtotal</p>
                <p id="tot1"></p>
            </div>
            <div class="over1">
                <p>Shipping & Handling - Standard</p>
                <p id="tot2">$72.34 </p>
            </div>
            <div class="over1">
                <p>Sales Tax </p>
                <p id="tot3">$72.34 </p>
            </div>
            <div id="divider"></div>
            <div class="over1">
                <p id="bigtxt">Order Total (USD)</p>
                <p id="bigtxt1"></p>
            </div >
            <div class="over1">
                <div id="paypal"><img id="payimg" src="https://www.paypalobjects.com/webstatic/en_US/i/buttons/PP_logo_h_150x38.png"></div>
                <a href="shipping.html"><div id="pay"><span id="txtout" class="fas fa-shopping-bag"></span>  CHECKOUT</div></a>
            </div>
        </id>
    </div>
    <div class="wrapper">
        <div>
            <h3 id="animhead">Wait! Don't Forget</h3>
        </div>
      
    <div id="foot1">
        <div id="form">
            <form>
                <p> Get email offers & the latest news from Bath & Body Works!</p>
                <p>Enter Email</p>
                <input type="email" placeholder="Enter Email">
                <p>Confirm Email</p>
                <input type="email" placeholder="Enter Email">
                <input id="submit" type="submit" value="submit">
            </form>
            <h4>Get Connected</h4>
            <div id="socialMedia">
                <span class="fab fa-facebook" id="fb"></span>
                <span class="fab fa-twitter-square" id="fb"></span>
                <span class="fab fa-youtube" id="youtube"></span>
                <span class="fab fa-pinterest" id="youtube"></span>
            </div>
        </div>
        <div id="logo"><img id="logoimg" src="https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1cf/on/demandware.static/-/Sites-BathAndBodyWorks-Library/default/dw0c8e6af7/images/evergreen/Happiness_Guaranteedtimes2_v2.jpg?yocs=q_s_"></div>
       <div id="contact">
            <div id="form">
                <h4>MY ACCOUNT</h4>
                <p class="p1">Sign-In</p>
                <p class="p1">Sign-Up</p>
                <p class="p1">My Auto Refresh</p>
                <p class="p1">My Love-It</p>
            </div>
            <div id="form">
                <h4>PRODUCTS</h4>
                <p class="p1">Mens's Page</p>
                <p class="p1">Womens's Page</p>
                <p class="p1">New Arrivals </p>
                <p class="p1">Aromatherapy Shop</p>
                <p class="p1">Shop By Fragrance </p>
            </div>
        </div>
    </div>
    <div id="foot2">
        <div id="footdiv">
            <P>Â© 2022 Bath & Body Works Direct, Inc. </P>
            <p>Cloned By fw15</p>
        </div>
    </div>
</body>
</html>


<script src="cart.js">

</script>

<script>

    var cartArray = JSON.parse(localStorage.getItem("cartItems"));

    

        var count = [];
        var price = [];

    for(var i = 0; i < cartArray.length; i++) {
        count[i] = 1;
        price[i] = Number(cartArray[i].rate.substring(5));
    }

    console.log(price);

    console.log(count);    

    createProduct(cartArray);   
    
    function createProduct(cartArray) {
        document.querySelector("#container").innerHTML = "";

        cartArray.map(function (ele, ind) {

            var prodis = document.createElement("div");
            prodis.setAttribute("id", "productdisplay");

            var pro = document.createElement("img");
            pro.setAttribute("src", ele.img);

            var protxt = document.createElement("div");
            protxt.setAttribute("class", "protext");

            var h4t = document.createElement("h4");
            h4t.textContent = ele.name;

            var p1t = document.createElement("p");
            p1t.textContent = ele.disc;

            var p2t = document.createElement("p");
            p2t.setAttribute("id", "redtext");
            p2t.textContent = ele.p1;

            var sp = document.createElement("span");
            sp.setAttribute("id", "heart");
            sp.setAttribute("class", "fas fa-heart");

            sp.addEventListener("click", function() {
                sp.setAttribute("class", "fas fa-heart checked");
            });

            var sp2 = document.createElement("span");
            sp2.textContent = " Add to Favorite";

            protxt.append(h4t, p1t, p2t, sp, sp2);

            var div2 = document.createElement("div");
            div2.setAttribute("id", "ratediv");

            var h31 = document.createElement("h3");
            h31.setAttribute("id", "rate");
            h31.textContent = ele.rate.substring(4);

            div2.append(h31);

            var div3 = document.createElement("div");
            div3.setAttribute("id", "cal");

            var div31 = document.createElement("div");
            div31.setAttribute("id", "hov");
            div31.setAttribute("class", "box");

            var p3t = document.createElement("p");
            p3t.textContent = "+";
            p3t.addEventListener("click", function() {
                    count[ind] += 1;
                    createProduct(cartArray);
                    update();
            });

            div31.append(p3t);

            var div41 = document.createElement("div");
            div41.setAttribute("class", "box");

            var p4t = document.createElement("p");
            p4t.textContent = count[ind];

            div41.append(p4t);

            var div51 = document.createElement("div");
            div51.setAttribute("id", "hov");
            div51.setAttribute("class", "box");

            var p5t = document.createElement("p");
            p5t.textContent = "-";
            p5t.addEventListener("click", function() {
                    if (count[ind] > 1) {
                        count[ind]--;
                        createProduct(cartArray);
                        update();
                    }
            });

            div51.append(p5t);

            div3.append(div31, div41, div51);

            var div6 = document.createElement("div");
            div6.setAttribute("id", "total");

            var ttxt = document.createElement("h4");
            ttxt.setAttribute("id", "tottext");
            ttxt.textContent = "$"+(price[ind] * count[ind]).toFixed(2);

            div6.append(ttxt);

            var div7 = document.createElement("div");
            
            var sp3 = document.createElement("span");
            sp3.setAttribute("id", "del");
            sp3.setAttribute("class", "fas fa-times");
            sp3.addEventListener("click", function() {
                cartArray.splice(ind, 1);
                createProduct(cartArray);
                update();
            });

            div7.append(sp3);

            prodis.append(pro, protxt, div2, div3, div6, div7);

            document.querySelector("#container").append(prodis);
        });
    }
    update();

    function update() {
        var sum = 0;
        for (var i = 0; i < price.length; i++)
            sum += (price[i] * count[i]);

        var txt1 = document.querySelector("#tot1")
        txt1.textContent = "$"+sum.toFixed(2);

        var txt2 = document.querySelector("#tot2")
        txt2.textContent = "$5.99";

        var tax = 0.05 * sum.toFixed(2);

        var txt3 = document.querySelector("#tot3")
        txt3.textContent = "$"+tax.toFixed(2);

        var total1 = Number(sum.toFixed(2)) + Number(tax.toFixed(2)) + Number(5.99);

        var txt4 = document.querySelector("#bigtxt1")
        txt4.textContent = "$"+total1.toFixed(2);
    }

    document.querySelector("#secretcode").addEventListener("click", function() {
        var code = document.querySelector("#codebox").value;

        if (code == "masaifw15") {
            var sum = 0;
            for (var i = 0; i < price.length; i++)
                sum += (price[i] * count[i]);

            var reduce = 0.05 * sum;
            sum = sum - reduce;

            var txt1 = document.querySelector("#tot1")
            txt1.textContent = "$"+sum.toFixed(2);

            var txt2 = document.querySelector("#tot2")
            txt2.textContent = "$5.99";

            var tax = 0.05 * sum.toFixed(2);

            var txt3 = document.querySelector("#tot3")
            txt3.textContent = "$"+tax.toFixed(2);

            var total1 = Number(sum.toFixed(2)) + Number(tax.toFixed(2)) + Number(5.99);

            var txt4 = document.querySelector("#bigtxt1")
            txt4.textContent = "$"+total1.toFixed(2);
        }
    });

</script>